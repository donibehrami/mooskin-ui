class SwitchExample extends React.Component {

    constructor(){
        super();

        this.switchAuto = this.switchAuto.bind(this);

        this.state = {
            automations: [
                {
                    complete: true,
                    running: false,
                    title: 'do this'
                },
                {
                    complete: true,
                    running: true,
                    title: 'do that'
                },
                {
                    complete: false,
                    running: false,
                    title: 'do nothing'
                }
            ]
        };
    }

    render(){
        const listAutomations = this.state.automations.map((automation, i) => {
            return (
                <Switch
                    key={i}
                    onClick={this.switchAuto(i)}
                    on={automation.running}
                    disabled={!automation.complete}
                    dataLabel={automation.title}
                    onLabel={'On'}
                    offLabel={'Off'}
                    disabledLabel={'Not Working'}
                />
            );
        });

        return(
            <div style={{display: 'flex'}}>
                {listAutomations}
            </div>
        );
    }

    switchAuto(i) {
        return (e, data) => {
            const automations = this.state.automations;
            automations[i].running = !this.state.automations[i].running;

            // update state
            this.setState({automations});
            console.log(data.value);
        };
    }
}
